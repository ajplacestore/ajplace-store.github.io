!function n(a,o,i){function d(s,t){if(!o[s]){if(!a[s]){var e="function"==typeof require&&require;if(!t&&e)return e(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}e=o[s]={exports:{}};a[s][0].call(e.exports,function(t){var e=a[s][1][t];return d(e||t)},e,e.exports,n,a,o,i)}return o[s].exports}for(var r="function"==typeof require&&require,t=0;t<i.length;t++)d(i[t]);return d}({1:[function(t,e,s){"use strict";!function(){try{var a={init:function(){a.getInfo(),$(document.body).is(".product")&&(a.addProdutcInList(),a.removeProductInList()),a.addShelfProductInList(),a.removeShelfProductInList()},dataUser:null,dataUserEmail:null,dataProduct:{prodId:null,sku:null},dataShelf:{prodId:null,sku:null},getInfo:function(){vtexjs.checkout.getOrderForm().done(function(t){var e=t.clientProfileData;e&&e.email?(t=e.email,a.dataUserEmail=t,$.ajax({type:"GET",url:"/api/dataentities/favoritos/search?_schema=ajp-body&email="+t,dataType:"json",contentType:"application/json",headers:{"Content-Type":"application/json",Accept:"application/vnd.vtex.ds.v10+json"}}).done(function(t){t.length?(a.dataUser=t[0],a.dataShelf=t[0],$(document.body).is(".product")&&a.setDataInFrontProduct(t[0]),$(document.body).is(".wishlist")&&a.showProductsInFavorites(),a.showProductInShowAlreadyAdd(),$(".shelf-item__wishlist button").removeClass("list-loaded")):console.log("Nenhum item na lista.")})):null!=e&&null!=e.email||($(".shelf-item__wishlist button").removeClass("list-loaded"),$(document.body).is(".wishlist")&&($(".wishlist-products--loader").addClass("hide"),$(".wishlist-products--empty").removeClass("hide")))})},setDataInFrontProduct:function(t){var e=!1;t.userItems.forEach(function(t){t==skuJson.productId&&(e=!0)}),e&&($(".product-wishlist--button.add").addClass("hide"),$(".product-wishlist--button.remove").removeClass("hide"))},addProdutcInList:function(){$(document).one("click",".product-wishlist--button.add",function(t){if(null==a.dataUser&&null==a.dataUserEmail)return vtexid.start(),void a.verifyVtexId();var e,s,n=skuJson.productId;null==a.dataUser?(e={email:a.dataUserEmail,userItems:[n]},a.sendPostToMD(e)):a.dataUser&&(s=a.dataUser.userItems,e=a.dataUser.id,(s=s).push(n),s={userItems:s},a.sendPatchToMD(e,s))})},removeProductInList:function(){$(document).one("click",".product-wishlist--button.remove",function(t){if(null==a.dataUser&&null==a.dataUserEmail)return vtexid.start(),void a.verifyVtexId();var e=a.dataUser.userItems,s=a.dataUser.id,e=e.filter(function(t){return t!==skuJson.productId});e.length?(e={userItems:e},a.sendPatchToMD(s,e)):a.deleteListWhenEmpty(s)})},sendPatchToMD:function(t,e){$.ajax({type:"PATCH",url:"/api/dataentities/favoritos/documents/"+t+"?_schema=ajp-body",dataType:"json",contentType:"application/json",headers:{"Content-Type":"application/json",Accept:"application/vnd.vtex.ds.v10+json"},data:JSON.stringify(e)}).done(function(t){swal({title:"Lista de desejos atualizada!",icon:"success"}).then(function(){location.reload()})})},sendPostToMD:function(t){$.ajax({type:"POST",url:"/api/dataentities/favoritos/documents?_schema=ajp-body",dataType:"json",contentType:"application/json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"},data:JSON.stringify(t)}).done(function(t){swal({title:"Sua lista de desejos foi criada!",text:"Confira seus itens salvos na pÃ¡gina de favoritos.",icon:"success"}).then(function(){location.reload()})})},showProductsInFavorites:function(){var e,n,t;null!=a.dataUser?(e=$(".wishlist-products--wrapper"),n=null,a.dataUser.userItems.forEach(function(t,e,s){n=0==e?"fq=productId:"+t:n+"&fq=productId:"+t}),t="/buscapagina?"+n+"&PS=50&sl=ff2a9142-b3a3-4bb4-94ed-02884096891f&cc=1&sm=0",$.ajax({type:"GET",url:t}).done(function(t){e.append(t),a.removeShelfProductInListUser(),$(".wishlist-products--loader").hide()})):vtexid.start()},showProductInShowAlreadyAdd:function(){$(".shelf-item__wishlist.shelf-default").each(function(){var t=$(this),e=t.closest(".shelf-item").attr("data-product-id");a.dataShelf.userItems.find(function(t){return t==e})&&(t.find(".shelf-wishlist--button.shelf.add").addClass("hide"),t.find(".shelf-wishlist--button.shelf.remove").removeClass("hide"))})},addShelfProductInList:function(){$(document).one("click",".shelf-wishlist--button.shelf.add",function(t){if(null==a.dataUser&&null==a.dataUserEmail)return vtexid.start(),void a.verifyVtexId();var e,s,n=$(this).closest(".shelf-item").attr("data-product-id"),n=parseInt(n);null==a.dataUser?(e={email:a.dataUserEmail,userItems:[n]},a.sendPostToMD(e)):a.dataUser&&(s=a.dataUser.userItems,e=a.dataUser.id,(s=s).push(n),s={userItems:s},a.sendPatchToMD(e,s))})},removeShelfProductInList:function(){$(document).one("click",".shelf-wishlist--button.shelf.remove",function(t){if(null==a.dataUser&&null==a.dataUserEmail)return vtexid.start(),void a.verifyVtexId();var e=$(this),s=a.dataUser.id,n=e.closest(".shelf-item").attr("data-product-id"),n=parseInt(n),e=a.dataUser.userItems.filter(function(t){return t!==n});e.length?(e={userItems:e},a.sendPatchToMD(s,e)):a.deleteListWhenEmpty(s)})},removeShelfProductInListUser:function(){$(document).one("click",".shelf-wishlist--button.shelf-button--remove.shelf-user",function(t){var e=$(this),s=a.dataUser.id,n=e.closest(".shelf-item").attr("data-product-id"),n=parseInt(n),e=a.dataUser.userItems.filter(function(t){return t!==n});e.length?(e={userItems:e},a.sendPatchToMD(s,e)):a.deleteListWhenEmpty(s)})},deleteListWhenEmpty:function(t){var e=a.headersDelete.headers;$.ajax({headers:e,url:"/api/dataentities/favoritos/documents/"+t,type:"DELETE",dataType:"json",contentType:"application/json"}).done(function(t){swal({title:"Lista de desejos limpa.",icon:"success"}).then(function(){location.reload()})})},reloadClickFunctionsIfCloseModal:function(){$("#dtbot-script").siblings("#vtexIdContainer.ng-scope").find(".vtexIdUI-page.ng-scope.vtexIdUI-confirm-email .close.vtexIdUI-close, .vtexIdUI-page.ng-scope.vtexIdUI-page-active .close.vtexIdUI-close").on("click",function(){a.addProdutcInList(),a.removeProductInList(),a.addShelfProductInList(),a.removeShelfProductInList()})},verifyVtexId:function(){var t=setInterval(function(){$("#vtexIdContainer.ng-scope").length&&(clearInterval(t),a.reloadClickFunctionsIfCloseModal())},50)},headersDelete:{headers:{"Content-Type":"application/json",Accept:"application/vnd.vtex.ds.v10+json","x-vtex-api-appkey":"vtexappkey-almeidajunior-MDITUY","x-vtex-api-apptoken":"CDINPPQASIYVUHBODRPGFEBJPISGACIQPFOHAZUHRRKDZPEDBNMSFIWXBYYGXJAPZHGPSUODWIONUYKZEOEMPQLHIRGBBNJHRUDRJPKHYJWXTJDCOZCIFNAJWYGBOMCI"}}};$(document).ready(a.init)}catch(t){console.log("Erro na instancia [Wishlist]: ",t)}}()},{}]},{},[1]);