/**
 * Avanti Comunicação <contato@penseavanti.com.br>
 * almeidajunior
 * @date Thu May 27 2021 17:44:41 GMT-0300 (GMT-03:00)
 */

 "use strict";!function(){try{var i={init:function(){i.applySearch(),i.applyConfigInSearchField(),i.headerConfig()},regex:{default:/-25-25/g,formated:"-40-40"},ajaxStop:function(){i.fixShelfValue()},applySearch:function(){var a,e=$(".ajp-header__search input"),t=$(".ajp-header-scresult"),n=void 0;e.on("keyup",function(e){e.preventDefault(),(a=$(this).val()).length||(console.log("Retorned"),t.empty(),t.hide()),clearTimeout(n),n=setTimeout(function(){i.getResultSearched(a)},300)})},getResultSearched:function(e){var a=$(".ajp-header-scresult");$.ajax({url:"/buscaautocomplete",type:"get",data:{maxRows:12,productNameContains:e}}).then(function(e){var e=e.itemsReturned,n="";e.map(function(t){t.items.map(function(e){var a;null!=e.imageUrl&&(a=i.changeImageSizeResult(e.imageUrl),e='\n                                <li>\n                                    <a href="'+t.href+'">\n                                        <img src="'+a+'" />\n                                        <span class="searched-product-name">'+e.name+"</span>\n                                    </a>\n                                </li>",n+=e)})}),$(".ajp-header-scresult").html('<ul class="searched-results">'+n+"</ul>"),a.show()})},changeImageSizeResult:function(e){return e.replace(i.regex.default,i.regex.formated)},mobileSearchFieldToggle:function(){var a=$(".header__link--search"),t=$(".search__close");$(".header__search-field");a.on("click",function(e){e.preventDefault(),$(".search__form").slideDown("fast"),$(".search__target").empty(),$(window).width()<992&&(a.hide("fast"),t.show("fast"))}),t.on("click",function(e){e.preventDefault(),$(".search__form").slideUp("fast"),$(".search__target").empty(),$(window).width()<992&&(t.hide("fast"),a.show("fast"))})},applyConfigInSearchField:function(){var a=$("#ajp-main-btn-search");a.on("click",function(){$(this).val(" ")}),$(document).click(function(e){$(e.target).is("#ajp-main-btn-search")||(a.val(""),$(".ajp-header-scresult").empty())})},fixShelfValue:function(){$(".shelf-item").each(function(e,a){a=$(a);a.find(".shelf-item__installments").children().length<=0&&(a.find(".shelf-item__installments").addClass("withoutInstallment"),a.find(".shelf-item__best-price").addClass("withoutInstallment"))})},headerConfig:function(){var e;console.log("[headerConfig]"),$("#ajp-button-hamburguer").on("click",function(){$(document.body).addClass("ajp-mmobile-opened")}),$(".ajp-mmobile").on("click",function(e){$(e.target).is(this)&&$(document.body).removeClass("ajp-mmobile-opened")}),$(".ajp-mmcat-buttons").on("click",function(e){$(this).next().toggle("fast"),$(this).toggleClass("rotate-button")}),$(".ajp-mobile-search").on("click",function(e){}),$(window).width()<992&&(e=$(".ajp-header__search--wrapper").children(),$(".ajp-headermobile__search").html(e));var a=$("#ajp-mobile-search"),t=$("#ajp-mobile-search--close"),n=$(".ajp-headermobile__search"),i=$("#ajp-main-btn-search");a.on("click",function(){$(this).hide("fast"),i.show(),n.slideDown(),t.show("fast")}),t.on("click",function(){$(this).hide("fast"),i.hide(),n.slideUp(),a.show("fast")})}};$(document).ready(i.init),$(document).ajaxStop(i.ajaxStop)}catch(e){console.log("Erro na instância do [Common]: ",e)}}();