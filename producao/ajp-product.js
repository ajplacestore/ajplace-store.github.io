/**
 * Avanti Comunicação <contato@penseavanti.com.br>
 * almeidajunior
 * @date Thu Mar 11 2021 13:17:25 GMT-0300 (GMT-03:00)
 */

"use strict";!function(){try{var l={init:function(){l.applyTextsMobile(),l.openShipping(),l.verifyIfProductAvaible(),l.getProductData(),l.getSkuInfos(),l.changeUrlCartBySeller(),l.toggleSellers()},productData:{id:$("#___rc-p-id").val(),items:null,sellers:null},imagesConfig:{image:{configMain:"530-625",configZoom:"1000-1000",configThumb:"100-100"},regexList:{main:/530-625/g,thumb:/100-100/g,size:/#width#-#height#/g,uncle:/~/g}},windowOnload:function(){l.cepText()},ajaxStop:function(){},openShipping:function(){"function"==typeof window.ShippingValue&&window.ShippingValue()},verifyIfProductAvaible:function(){function a(t){t?$(document.body).addClass("ajp-prod-available").removeClass("ajp-prod-unavailable"):$(document.body).addClass("ajp-prod-unavailable").removeClass("ajp-prod-available")}$(document).on("skuSelected.vtex",function(t,e,s){a(s.available)}),a(skuJson.available),$(document.body).is(".ajp-prod-unavailable")&&($(".sku-notifyme-client-name").attr("placeholder","SEU NOME"),$(".sku-notifyme-client-email").attr("placeholder","SEU E-MAIL"),$(".sku-notifyme-button-ok").val("AVISE-ME QUANDO CHEGAR"))},cepText:function(){console.log($("#txtCep").length),$("#txtCep").attr("placeholder","Digite seu CEP")},getProductData:function(){$.ajax({type:"GET",url:"/api/catalog_system/pub/products/search/?fq=productId:"+l.productData.id,dataType:"json",contentType:"application/json",headers:{"Content-Type":"application/json",Accept:"application/vnd.vtex.ds.v10+json"}}).done(function(t){console.log(t[0]),l.productData.items=t[0].items,$(".ajp-product__image--main").addClass("easyzoom easyzoom--overlay easyzoom--with-thumbnails is-ready"),l.buildThumbsImage(),l.applySlickThumbs(),991<$(window).width()&&l.applyEasyZoomFirstTime(),$(window).width()<=991&&l.fixersMobile()})},buildThumbsImage:function(){var t=$(".ajp-product__image--main"),e=$(".ajp-product__image--thumbs"),s=[],a="",n="";l.productData.items[0].images.forEach(function(t,e){0==e&&(n=(n=t.imageTag.replace(l.imagesConfig.regexList.size,l.imagesConfig.image.configMain)).replace(l.imagesConfig.regexList.uncle,""));t=t.imageTag.replace(l.imagesConfig.regexList.size,l.imagesConfig.image.configThumb).replace(l.imagesConfig.regexList.uncle,"");s.push(t)});for(var o=0;o<s.length;o++)a+='<li><a data-zoom="">'+s[o]+"</a></li>";t.html("<a>"+n+"</a>");var i=(i=t.find("img").attr("src")).replace(l.imagesConfig.regexList.main,"1000-1000");t.find("a").attr("href",i);i=$("<ul>"+a+"</ul>");i.find("> li").each(function(){var t=$(this),e=t.find("img").attr("src");t.find("a").attr("data-zoom",e)}),e.html(i)},applySlickThumbs:function(){var t=$(".ajp-product__image--thumbs > ul");if(t.children().length<5)return $(".ajp-product__image--thumbs > ul").addClass("no-slick"),void l.applyClickChangeImages();var e=l.arrowsSlick();t.slick({slidesToShow:4,slidesToScroll:1,prevArrow:'<button type="button" class="slick-prev">'+e.prev+"</button>",nextArrow:'<button type="button" class="slick-next">'+e.next+"</button>",arrows:!0,dots:!1,responsive:[{breakpoint:991,settings:{slidesToShow:4,slidesToScroll:1}}]}),t.each(function(){$(this).find(".slick-arrow").wrapAll('<div class="slick-nav" />')}),991<$(window).width()?(console.log("Desktop"),l.changeImageSlickAndMain()):$(window).width()<=991&&(console.log("Mobile"),l.changeImageSlickAndMainMobile())},changeImageSlickAndMain:function(){$(".slick-initialized.slick-slider").on("beforeChange",function(t,e,s,a){var n=$(this).find(".slick-current").next(),o=(o=n.find("a").attr("data-zoom")).replace(l.imagesConfig.regexList.thumb,"1000-1000"),n=(n=n.find("a").attr("data-zoom")).replace(l.imagesConfig.regexList.thumb,"530-625");$(".ajp-product__image--main a").attr("href",o),$(".ajp-product__image--main img").attr("src",n),l.destroyAndInitEasyzoom()})},changeImageSlickAndMainMobile:function(){$(".slick-initialized.slick-slider").on("beforeChange",function(t,e,s,a){var n=(n=$(this).find(".slick-current").next().find("img").attr("src")).replace(l.imagesConfig.regexList.thumb,l.imagesConfig.image.configMain);$(".ajp-product__image--main img").attr("src",n)})},applyEasyZoomFirstTime:function(){$(".easyzoom").easyZoom().data("easyZoom")},destroyAndInitEasyzoom:function(){var t=$(".easyzoom").easyZoom().data("easyZoom");t.teardown(),t._init()},arrowsSlick:function(){return{prev:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" version="1.1" width="18" height="18" x="0" y="0" viewBox="0 0 443.52 443.52" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><g xmlns="http://www.w3.org/2000/svg"><g><path d="M143.492,221.863L336.226,29.129c6.663-6.664,6.663-17.468,0-24.132c-6.665-6.662-17.468-6.662-24.132,0l-204.8,204.8    c-6.662,6.664-6.662,17.468,0,24.132l204.8,204.8c6.78,6.548,17.584,6.36,24.132-0.42c6.387-6.614,6.387-17.099,0-23.712    L143.492,221.863z" fill="#000000" data-original="#000000" style=""/></g></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g></g></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" version="1.1" width="18" height="18" x="0" y="0" viewBox="0 0 443.52 443.52" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><g xmlns="http://www.w3.org/2000/svg"><g><path d="M336.226,209.591l-204.8-204.8c-6.78-6.548-17.584-6.36-24.132,0.42c-6.388,6.614-6.388,17.099,0,23.712l192.734,192.734    L107.294,414.391c-6.663,6.664-6.663,17.468,0,24.132c6.665,6.663,17.468,6.663,24.132,0l204.8-204.8    C342.889,227.058,342.889,216.255,336.226,209.591z" fill="#000000" data-original="#000000" style="" class=""/></g></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g><g xmlns="http://www.w3.org/2000/svg"></g></g></svg>'}},fixersMobile:function(){$(".ajp-product__image--main a").removeAttr("href")},getSkuInfos:function(){var i=$(".ajp-product__sellers--list");1<skuJson.skus.length?(console.log("Mais de 1 SKU."),$(document).on("skuSelected.vtex",function(t,e,s){console.log("SkuTrocado"),console.log(s),$(".ajp-product__sellers--open").addClass("hide"),$(".ajp-product__sellers--close").removeClass("hide"),$(".ajp-product__sellers--menssage").hide("fast");var a=s,n=l.productData.items.filter(function(t){return t.itemId==s.sku})[0].sellers,o="";n.forEach(function(t){1!=t.sellerId&&(t='\n                                <div class="seller-box--item">\n                                    <div>\n                                        <span class="item-name">'+t.sellerName+' - </span>\n                                        <ul class="item-price">\n                                            <li class="first">Por: </li>\n                                            <li class="second">'+a.bestPriceFormated+'</li>\n                                        </ul>\n                                    </div>\n                                    <label class="container">\n                                        <input type="radio" value="'+t.addToCartLink+'" name="lojas">\n                                        <span class="checkmark"></span>\n                                    </label>\n                                </div>',o+=t,i.html("<form>"+o+"</form>"))})})):console.log("Apenas 1 SKU.")},changeUrlCartBySeller:function(){$(document).on("change",".ajp-product__sellers--list input",function(){var t=$(this);$(".buy-button.buy-button-ref").attr("href",t.val())})},toggleSellers:function(){var t=$(".ajp-product__sellers--menssage");$(".ajp-product__sellers--open").on("click",function(){0!=$(".ajp-product__sellers--list").children().length?($(".ajp-product__sellers--list").slideToggle("fast"),$(this).addClass("hide"),$(".ajp-product__sellers--close").removeClass("hide")):t.show("fast")}),$(".ajp-product__sellers--close").on("click",function(){0!=$(".ajp-product__sellers--list").children().length&&($(".ajp-product__sellers--list").slideToggle("fast"),$(this).addClass("hide"),$(".ajp-product__sellers--open").removeClass("hide"))})},applyClickChangeImages:function(){$(document).on("click",".ajp-product__image--thumbs a",function(){var t=$(this).find("img").attr("src"),e=$(".ajp-product__image--main img"),t=t.replace(l.imagesConfig.regexList.thumb,l.imagesConfig.image.configMain);e.attr("src",t),991<$(window).width()&&l.destroyAndInitEasyzoom()})},applyTextsMobile:function(){var t=$(".ajp-product__infosmobile"),e=$(".ajp-product__name div").text(),s=$(".ajp-product__brand a").clone();t.find(".mobile-brand").html(s),t.find(".mobile-name").html("<span>"+e+"</span>")}};$(document).ready(l.init),$(document).ajaxStop(function(){l.ajaxStop()}),$(window).load(l.windowOnload)}catch(t){console.log("Erro na instancia [New Product]: ",t)}}();